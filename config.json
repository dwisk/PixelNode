{
	"title": "PixelNode",
	"inputMode": "server",

	"webServer": {
		"start": true,
		"port": 3001
	},

	"pixelDrivers": [
		{
			"module": "pixelnode-driver-fadecandy",
			"address": "127.0.0.1",
			"port": 7890,
			"delay": 50
		},
		{
			"module": "pixelnode-driver-websimulator",
			"delay": 50
		}
	],

	"inputs": [
		{
			"name": "nunchuk1",
			"module": "pixelnode-input"
		},
		{
			"name": "nunchuk2",
			"module": "pixelnode-input"
		},
		{
			"name": "switch",
			"module": "../inputs/PixelNode_Input_WebSocket"
		},
		{
			"name": "touchrgb",
			"module": "../inputs/PixelNode_Input_TouchRGB",
			"effect_select": "ColorRing",
			"effect_ring1": "ColorPlayer1",
			"effect_ring2": "ColorPlayer2"
		},
		{
			"name": "buttons",
			"module": "pixelnode-input-bbbgpio",
			"pins": [
				{ "number": "P8_10", "input": "button_left", "default": false },
				{ "number": "P8_12", "input": "button_right", "default": false },
				{ "number": "P8_8", "input": "button_back", "default": false }
			]
		},
		{
			"name": "touch",
			"module": "../inputs/PixelNode_Input_MPR121",
			"data_target": "touches",
			"crash_waittime": 1,
			"crash_cautious_lifetime": 20,
			"crash_cautious_waittime": 2,
			"i2c_bus": 2,
			"offset": 1,
			"verbose": false
		},
		{
			"name": "rgb",
			"module": "pixelnode-input",
			"modulex": "pixelnode-input-bbbtcs34725",
			"data_target": "rgbsensors",
			"sensors": [
				{
					"name"	  : "color_left",
				    "bus"     : "/dev/i2c-2", 
				    "led_pin" : "P9_23", 
				    "irq_pin" : "P9_15",
				    "enable"  : "inputs.buttons.button_left"
				},
				{
					"name"	  : "color_right",
					"bus"     : "/dev/i2c-1", 
					"led_pin" : "P9_25", 
					"irq_pin" : "P9_27",
					"enable"  : "inputs.buttons.button_right"
			    }
			]
		}
	],

	"queue": [
		{ "effect": "Color", "duration": 30000 },
		{ "effect": "Ray", "duration": 30000 },
		{ "effect": "Glitter", "duration": 30000 },
		{ "effect": "RainBow", "duration": 30000 },
		{ "effect": "RainBowRings", "duration": 30000 },
		{ "effect": "RedBlue", "duration": 30000 }
	],
	"effects": [
		{
			"name": "Color",
			"module": "../effects/PixelNode_Effect_Color",
			"inputs": {
			},
			"outputs": [
				{
					"name": "color1",
					"targets": [
						"player1.rings"
					]
				},
				{
					"name": "color2",
					"targets": [
						"player2.rings"
					]
				},
				{
					"name": "both",
					"targets": [
						"domePixels.strips"
					]
				}
			]
		},
		{
			"name": "Off",
			"module": "../effects/PixelNode_Effect_Off",
			"inputs": {
			},
			"outputs": [
				{
					"name": "black",
					"targets": [
						"domePixels.rings",
						"touch.rings",
						"inside.rings",
						"player1.rings",
						"player2.rings"
					]
				}
			]
		},
		{
			"name": "Ray",
			"module": "../effects/PixelNode_Effect_Ray",
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "ray",
					"targets": [
						"domePixels.strips",
						"player1.strips",
						"player2.strips"
					]
				}
			]
		},
		{
			"name": "Wall",
			"module": "../effects/PixelNode_Effect_Wall",
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "ray",
					"targets": [
						"domePixels.rings",
						"player1.strips",
						"player2.strips"
					]
				}
			]
		},
		{
			"name": "Glitter",
			"module": "../effects/PixelNode_Effect_Glitter",
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "glow",
					"targets": [
						"domePixels.rings",
						"player1.strips",
						"player2.strips"
					]
				}
			]
		},
		{
			"name": "RainBow",
			"module": "../effects/PixelNode_Effect_Rainbow",
			"scale": 10,
			"speed": 5,
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "rainbow",
					"targets": [
						"domePixels.strips",
						"touch.strips"
					]
				},
				{
					"name": "black",
					"targets": [
						"player1.rings",
						"player2.rings"
					]
				}
			]
		},		
		{
			"name": "ColorRing",
			"module": "../effects/PixelNode_Effect_Rainbow",
			"scale": 1,
			"speed": 5,
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "rainbow",
					"targets": [
						"touch.rings"
					]
				}
			]
		},		
		{
			"name": "IntensityRing",
			"module": "../effects/PixelNode_Effect_Intensity",
			"scale": 1,
			"speed": 0,
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "rainbow",
					"targets": [
						"touch.rings"
					]
				}
			]
		},		
		{
			"name": "RainBowRings",
			"module": "../effects/PixelNode_Effect_Rainbow",
			"scale": 1,
			"speed": 100,
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "rainbow",
					"targets": [
						"domePixels.rings",
						"player1.rings",
						"player2.rings"
					]
				}
			]
		},		
		{
			"name": "RedBlue",
			"module": "../effects/PixelNode_Effect_RedBlue",
			"inputs": {
				"color1": "rgb1.color",
				"color2": "rgb2.color",
				"stopper": "touch.values"
			},
			"outputs": [
				{
					"name": "glow",
					"targets": [
						"domePixels.strips",
						"player1.strips",
						"player2.strips"
					]
				}
			]
		}
	]
}